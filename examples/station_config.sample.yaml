name: CKNW
sample_rate: 16000
vad:
  threshold: 0.35
  min_speech_s: 0.3
diarization:
  model: pyannote/speaker-diarization@2.1
transcription:
  provider: azure_speech
  diarization: true
  max_speakers: 4
  language: en-CA

heuristics:
  min_story_s: 35
  max_silence_gap_s: 3.0
  candidate_min_score: 0.85
  hard_min_cut_score: 1.3
  change_score_weights:
    audio: 1.0
    text: 1.3
    silence: 0.7
    anchor: 1.5
    keyword: 3.0
  snap_window_s: 1.0
  keyword_patterns:
    - "(?i)coming up"
    - "(?i)and now"
  keyword_score: 5.0
text:
  chunk_s: 8
  llm_segmentation: false
  llm_model: gpt-4o-mini
  llm_prompt: |
    You are detecting radio news story boundaries.
    Return ONLY valid JSON:
    {
      "boundaries":[
        {"time_s": 123.45,
         "quote":"exact 5-15 word excerpt from transcript near the boundary",
         "type":"new_story|ad_break|weather|traffic|sports|tease|return_to_anchor",
         "confidence":0.0-1.0,
         "reason":"short"}
      ]
    }
    Rules:
    - time_s must correspond to the FIRST word of the new story/segment.
    - quote must be copied verbatim from the transcript.
    - Avoid boundaries closer than 15s apart unless type is ad_break/tease.
  embedding_model: text-embedding-3-large
