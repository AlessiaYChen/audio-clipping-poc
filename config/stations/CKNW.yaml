name: CKNW
sample_rate: 16000
transcription:
  provider: azure_speech
  diarization: true
  max_speakers: 17
  language: en-CA
text:
  chunk_size_s: 3.0        # NEW: Higher precision text analysis
  llm_segmentation: true
  llm_model: gpt-4o-mini
  llm_prompt: |
    You are detecting radio news story boundaries.
    Return ONLY valid JSON:
    {
      "boundaries":[
        {"time_s": 123.45,
         "quote":"exact 5-15 word excerpt from transcript near the boundary",
         "type":"new_story|ad_break|weather|traffic|sports|tease|return_to_anchor",
         "confidence":0.0,
         "reason":"short"}
      ]
    }
    Rules:
    - time_s must correspond to the FIRST word of the new story/segment.
    - quote must be copied verbatim from the transcript.
    - Avoid boundaries closer than 15s apart unless type is ad_break/tease.
  chunk_overlap_ratio: 0.5
heuristics:
  boundary_threshold: 3.0
  boundary_weights:
    semantic_shift: 2.5
    return_to_anchor:      3.5
    speaker_change: 2.0
    text_semantic_shift:   3.0   # bump this up
    audio_embedding_shift: 2.0
    long_silence:          1.0
    jingle_detected:       1.5
  text_threshold: 0.7
  silence_min_s: 1.5
  min_story_s: 25
  max_story_s: 360
  candidate_min_score: 0.5
  hard_min_cut_score: 0.7
  change_score_smoothing: 1
  snap_window_s: 3.0
  keyword_score: 3.5
  change_score_weights:
    audio: 1.0
    text: 2.0
    silence: 1.2
    anchor: 2.0
    keyword: 3.0
  audio_window_s: 2.0
  audio_hop_ratio: 0.5
  keyword_patterns:
    - "(?i)we'll have more on that"
    - "(?i)back after the break"
    - "(?i)you're listening to"
    - "(?i)CKNW"
